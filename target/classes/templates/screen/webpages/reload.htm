
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" es:layout>
<head>
    <title>MelodyDemo</title>
    <link rel="stylesheet" type="text/css" media="all"
          href="script/chat.css" />
</head>
<body>
<th:block th:fragment="screen_content">

    <br/><br/>
    <h3>Reload</h3>
    <div>
        <p>使用Melody内置的JavaScript时,可以设置某个Contain过来的页面"可以被刷新",使用以下的javascript方法可以刷新内容</p>
        <p>首先需要在模板中引入相应的js</p>
        <div class="melody-code-wrap"><pre><code>
              &lt;script type=&quot;text/javascript&quot;  th:src=&quot;${#url.get('appServer','/script/contain/common.js')}&quot; &gt;&lt;/script&gt;
            &lt;script type=&quot;text/javascript&quot; th:src=&quot;${#url.get('appServer','/script/contain/reload.js')}&quot; &gt;&lt;/script&gt;
            &lt;script type=&quot;text/javascript&quot;  th:src=&quot;${#url.get('appServer','/script/contain/lazy.js')}&quot; &gt;&lt;/script&gt;

        </code></pre></div>
        <p>在相应的contain上加上reload:</p>
        <div class="melody-code-wrap"><pre><code>
            &lt;th:block es:contain=&quot;reload:${#url.get('appServer','webpages/widget/reload.htm')}&quot; &gt;&lt;/th:block&gt;
        </code></pre></div>

        <p>在需要调用的地方使用 id 调用即可,如果你同时使用其他的框架,获取到dom后也可以使用以下方式调用,只需将id替换成对应的dom(contain所在的dom节点)</p>
        <div class="melody-code-wrap"><pre><code>
            Melody.get("id"|dom).refresh();
        </code></pre></div>

        <p>你可以点击这个<button onclick="Melody.get('reloadable').refresh();">按钮</button>,下面的数据会进行刷新,这一切都是自动的.</p>
        <div id="reloadable"  class="melody-code-wrap" es:contain="reload:${#url.get('appServer','webpages/widget/reload.htm')}">

        </div>

    </div>
</th:block>
</body>
</html>